# py-captions-for-channels Configuration
# Copy this file to .env and customize for your environment

# ==============================================================================
# CHANNELS DVR CONFIGURATION
# ==============================================================================

# Channels DVR API endpoint
# Default: http://localhost:8089
CHANNELS_API_URL=http://<CHANNELS_DVR_SERVER>:8089

# DVR recordings storage path (for Docker volume mount)
# This should be the path on the HOST machine where recordings are stored
# Default: /recordings
DVR_RECORDINGS_PATH=/tank/AllMedia/Channels

# ==============================================================================
# CHANNELWATCH CONFIGURATION
# ==============================================================================

# ChannelWatch WebSocket endpoint (usually not needed - webhooks are preferred)
# Default: ws://localhost:8501/events
CHANNELWATCH_URL=ws://<CHANNELWATCH_SERVER>:8501/events

# ==============================================================================
# EVENT SOURCE CONFIGURATION
# ==============================================================================

# Use mock event source for testing (true/false)
# Default: false
USE_MOCK=false

# Use webhook receiver for production (true/false)
# Default: true
USE_WEBHOOK=true

# ==============================================================================
# WEBHOOK SERVER CONFIGURATION
# ==============================================================================

# Host to bind webhook server to
# Default: 0.0.0.0 (all interfaces)
WEBHOOK_HOST=0.0.0.0

# Port for webhook server
# Default: 9000
# Configure in ChannelWatch as: json://<your-host-ip>:9000
WEBHOOK_PORT=9000

# ==============================================================================
# CAPTION PIPELINE CONFIGURATION
# ==============================================================================

# Transcode for Fire TV / Android clients (true/false)
# false: Only create .srt files (fast, ~1min per recording, works on Apple TV/Roku/Web)
# true: Transcode to MP4 with burned-in captions (slow, ~10-30min per recording, works on Fire TV/Android)
# Default: false
TRANSCODE_FOR_FIRETV=false

# Keep original recording as backup (true/false)
# true: Original .mpg file is archived as .mpg.orig after transcoding
# false: Original is deleted after successful transcoding (saves disk space)
# Note: Only applies when TRANSCODE_FOR_FIRETV=true
# Default: true
KEEP_ORIGINAL=true

# Caption command template
# {path} will be replaced with the recording file path
# Default (SRT only): bash -c 'whisper --model medium --output_format srt --output_dir "$(dirname "{path}")" "{path}"'
# For transcoding: /app/scripts/embed_captions.sh {path}
# Leave commented to use automatic default based on TRANSCODE_FOR_FIRETV setting
# CAPTION_COMMAND=/app/scripts/embed_captions.sh {path}

# Dry-run mode: if true, only print commands without executing
# Default: false
DRY_RUN=false

# Pipeline timeout in seconds
# For SRT only: 3600 (1 hour) is usually sufficient
# For transcoding: 7200 (2 hours) recommended for long recordings
# Default: 7200
PIPELINE_TIMEOUT=7200

# ==============================================================================
# STATE AND LOGGING CONFIGURATION
# ==============================================================================

# State file location (for tracking processed recordings)
# Default: /app/data/state.json (Docker) or ./data/state.json (local)
STATE_FILE=/app/data/state.json

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# Default: INFO
LOG_LEVEL=INFO

# ==============================================================================
# ADVANCED CONFIGURATION
# ==============================================================================

# DVR log file path (for log-based source, if implemented)
# Default: /var/log/channels-dvr.log
LOG_PATH=/share/CACHEDEV1_DATA/.qpkg/ChannelsDVR/channels-dvr.log

# API request timeout in seconds
# Default: 10
API_TIMEOUT=10
